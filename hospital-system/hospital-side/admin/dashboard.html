<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>åŒ»é™¢ç®¡ç†å‘˜ä»ªè¡¨ç›˜ - åŒ»ç–—ç®¡ç†ç³»ç»Ÿ</title>
    <link rel="stylesheet" href="../../assets/css/style.css">
    <style>
        /* ç®¡ç†å‘˜ä»ªè¡¨ç›˜ç‰¹å®šæ ·å¼ */
        .dashboard-container {
            display: flex;
            min-height: 100vh;
        }
        
        .main-content {
            flex: 1;
            padding: 20px;
            background-color: #f8f9fa;
        }
        
        .dashboard-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
        }
        
        .dashboard-header h1 {
            color: #333;
        }
        
        .user-info {
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .stats-cards {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }
        
        .stat-card {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .stat-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: 20px;
            color: white;
        }
        
        .stat-icon.doctors {
            background-color: #1a73e8;
        }
        
        .stat-icon.departments {
            background-color: #28a745;
        }
        
        .stat-icon.patients {
            background-color: #ffc107;
        }
        
        .stat-icon.appointments {
            background-color: #dc3545;
        }
        
        .stat-info h3 {
            margin: 0;
            font-size: 14px;
            color: #666;
        }
        
        .stat-info p {
            margin: 5px 0 0 0;
            font-size: 24px;
            font-weight: bold;
            color: #333;
        }
        
        .recent-activities {
            background-color: white;
            border-radius: 8px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            padding: 20px;
        }
        
        .recent-activities h2 {
            margin-bottom: 20px;
            font-size: 18px;
            color: #333;
        }
        
        .activity-list {
            list-style: none;
            padding: 0;
        }
        
        .activity-item {
            padding: 15px 0;
            border-bottom: 1px solid #eee;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .activity-item:last-child {
            border-bottom: none;
        }
        
        .activity-time {
            font-size: 12px;
            color: #999;
            white-space: nowrap;
        }
        
        .activity-content {
            flex: 1;
        }
        
        .activity-content p {
            margin: 0;
        }
        
        @media (max-width: 768px) {
            .dashboard-container {
                flex-direction: column;
            }
            
            .stats-cards {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <div class="dashboard-container">
        <!-- ä¾§è¾¹æ å¯¼èˆª -->
        <aside class="sidebar">
            <h3>ç®¡ç†å‘˜èœå•</h3>
            <ul>
                <li><a href="dashboard.html" class="active">ä»ªè¡¨ç›˜</a></li>
                <li><a href="manage-users.html">ç”¨æˆ·ç®¡ç†</a></li>
                <li><a href="manage-departments.html">ç§‘å®¤ç®¡ç†</a></li>
                <li><a href="system-settings.html">ç³»ç»Ÿè®¾ç½®</a></li>
                <li><a href="../login.html" id="logoutBtn">é€€å‡ºç™»å½•</a></li>
            </ul>
        </aside>
        
        <!-- ä¸»å†…å®¹åŒºåŸŸ -->
        <main class="main-content">
            <div class="dashboard-header">
                <h1>åŒ»é™¢ç®¡ç†ä»ªè¡¨ç›˜</h1>
                <div class="user-info">
                    <span id="currentUser">ç®¡ç†å‘˜</span>
                    <span>|</span>
                    <a href="#" id="userProfile">ä¸ªäººè®¾ç½®</a>
                </div>
            </div>
            
            <!-- ç»Ÿè®¡å¡ç‰‡ -->
            <div class="stats-cards">
                <div class="stat-card">
                    <div class="stat-icon doctors">ğŸ‘¨â€âš•ï¸</div>
                    <div class="stat-info">
                        <h3>åŒ»ç”Ÿæ€»æ•°</h3>
                        <p id="doctorsCount">24</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon departments">ğŸ¥</div>
                    <div class="stat-info">
                        <h3>ç§‘å®¤æ•°é‡</h3>
                        <p id="departmentsCount">12</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon patients">ğŸ‘¥</div>
                    <div class="stat-info">
                        <h3>æ³¨å†Œæ‚£è€…</h3>
                        <p id="patientsCount">538</p>
                    </div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-icon appointments">ğŸ“…</div>
                    <div class="stat-info">
                        <h3>ä»Šæ—¥é¢„çº¦</h3>
                        <p id="appointmentsCount">42</p>
                    </div>
                </div>
            </div>
            
            <!-- æœ€è¿‘æ´»åŠ¨ -->
            <div class="recent-activities">
                <h2>æœ€è¿‘æ´»åŠ¨</h2>
                <ul class="activity-list">
                    <li class="activity-item">
                        <span class="activity-time">10:24</span>
                        <div class="activity-content">
                            <p>åŒ»ç”Ÿ <strong>å¼ ä¼Ÿ</strong> å®Œæˆäº†æ‚£è€… <strong>ææ˜</strong> çš„è¯Šç–—</p>
                        </div>
                    </li>
                    <li class="activity-item">
                        <span class="activity-time">09:15</span>
                        <div class="activity-content">
                            <p>æ–°æ·»åŠ ç§‘å®¤ï¼š<strong>å¿ƒè„å¤–ç§‘</strong></p>
                        </div>
                    </li>
                    <li class="activity-item">
                        <span class="activity-time">08:42</span>
                        <div class="activity-content">
                            <p>åŒ»ç”Ÿ <strong>ç‹ä¸½</strong> ä¸Šä¼ äº†æ‚£è€… <strong>å¼ å</strong> çš„Xå…‰ç‰‡</p>
                        </div>
                    </li>
                    <li class="activity-item">
                        <span class="activity-time">08:10</span>
                        <div class="activity-content">
                            <p>æ‚£è€… <strong>åˆ˜èŠ³</strong> é¢„çº¦äº†åŒ»ç”Ÿ <strong>èµµåŒ»ç”Ÿ</strong> çš„é—¨è¯Š</p>
                        </div>
                    </li>
                    <li class="activity-item">
                        <span class="activity-time">æ˜¨å¤©</span>
                        <div class="activity-content">
                            <p>æ–°åŒ»ç”Ÿ <strong>é™ˆæ˜</strong> å®Œæˆæ³¨å†Œ</p>
                        </div>
                    </li>
                </ul>
            </div>
        </main>
    </div>

    <script type="module">
        import { showAlert, storage } from '../../assets/js/utils.js';

        // é¡µé¢åŠ è½½æ—¶ï¼Œä»æœ¬åœ°å­˜å‚¨è·å–ç”¨æˆ·ä¿¡æ¯
        document.addEventListener('DOMContentLoaded', function() {
            const userInfo = storage.get('userInfo');
            
            if (userInfo) {
                document.getElementById('currentUser').textContent = userInfo.username;
            } else {
                // å¦‚æœæ²¡æœ‰ç™»å½•ä¿¡æ¯ï¼Œè·³è½¬åˆ°ç™»å½•é¡µé¢
                window.location.href = '../login.html';
            }
        });

        // é€€å‡ºç™»å½•åŠŸèƒ½
        document.getElementById('logoutBtn').addEventListener('click', function(e) {
            e.preventDefault();
            
            // æ¸…é™¤æœ¬åœ°å­˜å‚¨ä¸­çš„ç”¨æˆ·ä¿¡æ¯
            storage.remove('userInfo');
            
            showAlert('success', 'é€€å‡ºæˆåŠŸï¼');
            
            // è·³è½¬åˆ°ç™»å½•é¡µé¢
            setTimeout(() => {
                window.location.href = '../login.html';
            }, 1000);
        });

        // ä¸ªäººè®¾ç½®
        document.getElementById('userProfile').addEventListener('click', function(e) {
            e.preventDefault();
            showAlert('info', 'ä¸ªäººè®¾ç½®åŠŸèƒ½å³å°†ä¸Šçº¿');
        });

        // æ¨¡æ‹Ÿæ•°æ®æ›´æ–°ï¼ˆå®é™…é¡¹ç›®ä¸­åº”ä»æœåŠ¡å™¨è·å–ï¼‰
        function updateDashboardData() {
            // è¿™é‡Œæ˜¯æ¨¡æ‹Ÿæ•°æ®ï¼Œå®é™…é¡¹ç›®ä¸­åº”é€šè¿‡APIè·å–
            console.log('æ›´æ–°ä»ªè¡¨ç›˜æ•°æ®');
        }

        // å®šæœŸæ›´æ–°æ•°æ®
        setInterval(updateDashboardData, 60000); // æ¯åˆ†é’Ÿæ›´æ–°ä¸€æ¬¡
    </script>
</body>
</html>